#:kivy 1.8.0
#:import Factory kivy.factory.Factory

#:set color_button (255, 255, 255, 1)  # white
#:set color_button_pressed (255, 255, 255, 1)  # white
#:set color_font   (0, 0, 0, 1)  # black

<TagSpinnerOption@SpinnerOption>:
    background_color: color_button if self.state == 'down' else color_button_pressed
    color: color_font
    valign: "middle"
    halign: "center"
    text_size: self.width-(self.width*.1), self.height

<StationListingItem>:
    size_hint_y: None
    size_hint_x: None
    height: 225
    width: 200
    background_color: (0, 0, 0, 1)
    text_size: 190, 225
    valign: "middle"
    halign: "left"
    canvas:
        Rectangle:
            size:200, 1
            pos: self.pos

<PlaylistDetails>:
    cover_image: cover_image
    station_text_details: station_text_details
#    file_chooser: file_chooser
    Image:
        id: cover_image
        size_hint_x: None
        size_hint_y: None
        width: 120
        height: 120
        valign: "middle"
    Label:
        id: station_text_details
        size_hint_y: None
        size_hint_x: None
        height: 225
        width: root.width
        background_color: (1, 0, 0, 1)
        text_size: 190, 225
        markup: True
        valign: "middle"
        halign: "left"
#    FileChooserListView:
#        id: file_chooser
    Button:
        text: "Start download"
        size_hint_y: None
        size_hint_x: None
        size: 50, 20

#    Button:
#        id: f_but
#        text: "Download"
#        on_release: root.download()

<PlaylistDownloader>:
    Label:
        text: "Download"

<DownloaderWrapper>:
    id: main_screen
    canvas:
        Rectangle:
            size:1, self.height
            pos: self.width/4, 0
        Rectangle:
            size:1, self.height
            pos: self.width/2 + 50, 0

    playlist_search_panel: playlist_search_panel
    playlist_details: playlist_details
    playlist_downloader: playlist_downloader
#    canvas.before:
#        Rectangle:
#            size: self.size
#            source: 'assets/background-gradient.png'
    BoxLayout:
        PlaylistSearchPanel:
            station_list: station_list
            genre_list: genre_list
            id: playlist_search_panel
            orientation: "vertical"
            size_hint: None, None
            height:root.height
            width: root.width/4
            GenreSpinner:
                id: genre_list
                size_hint_y: None
                height: root.height * .05
                background_color: color_button if self.state == 'normal' else color_button_pressed
                color: color_font
                option_cls: Factory.get("TagSpinnerOption")
                on_text: playlist_search_panel.genre_picked(args[1])
                text: "Choose a genre"
            StationList:
                id: station_list
                height: root.height * .95
                do_scroll_x: False
        PlaylistDetails:
            id: playlist_details
            orientation: "vertical"
            size_hint: None, None
            height:root.height
            width: root.width/4
        PlaylistDownloader:
            id: playlist_downloader
            orientation: "vertical"
            size_hint: None, None
            height:root.height
            width: root.width/2
        
